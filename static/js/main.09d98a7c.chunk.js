(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],[,,,function(e,t,n){e.exports={container:"setup_container__1fB0P",size:"setup_size__b1xR5",radio:"setup_radio__cKofK",label:"setup_label__2J7Jb",table:"setup_table__1AURJ",cell:"setup_cell__xt6gJ",cell_selected:"setup_cell_selected__3UCgu",submit:"setup_submit__AF8hv"}},,function(e,t,n){e.exports={field:"field_field__2R9AU",cell:"field_cell__1deHi",snake:"field_snake__dFqKB",target:"field_target__1UPnj"}},,,,,,,function(e,t,n){e.exports={navigation:"navigation_navigation__unRcd"}},function(e,t,n){e.exports={result:"result_result__x6heC"}},function(e,t,n){e.exports={app:"main_app__3CLA4"}},,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(11),i=n.n(c),u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},s=n(9),l=n(2),o=n(8),f=n.n(o);function b(e){if(void 0===e)throw new Error("Value is undefined");return e}function j(e,t){var n=Object(l.a)(t,2),r=n[0],a=n[1];return e.some((function(e){var t=Object(l.a)(e,2),n=t[0],c=t[1];return n===r&&c===a}))}function d(e,t){return e<0||e>=t}function O(e,t){var n=m(t),r=m(t);e.forEach((function(e){var t=Object(l.a)(e,2),a=t[0],c=t[1];n[a]+=1,r[c]+=1}));var a=g(n),c=g(r),i=a.filter((function(e){return Object(l.a)(e,2)[1]===a[0][1]})),u=c.filter((function(e){return Object(l.a)(e,2)[1]===c[0][1]})),s=Object(l.a)(i[v(i.length)],1)[0],o=Object(l.a)(u[v(u.length)],1)[0],f=Number(s),b=Number(o);if(f<b){var j=new Set;return e.forEach((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];n===f&&j.add(r)})),[f,h(j,t)]}var d=new Set;return e.forEach((function(e){var t=Object(l.a)(e,2),n=t[0];t[1]===b&&d.add(n)})),[h(d,t),b]}function h(e,t){var n=Array.from({length:t},(function(e,t){return t})).filter((function(t){return!e.has(t)}));return n[v(n.length)]}function v(e){return Math.floor(Math.random()*e)}function g(e){return Object.entries(e).sort((function(e,t){return Object(l.a)(e,2)[1]-Object(l.a)(t,2)[1]}))}function m(e){return Array.from({length:e},(function(e,t){return t})).reduce((function(e,t){return e[t]=0,e}),{})}var x=n(5),_=n.n(x),p=n(0);function S(e){for(var t=e.size,n=e.snake,r=Object(l.a)(e.target,2),a=r[0],c=r[1],i=[],u=0;u<t;u++){for(var s=[],o=0;o<t;o++){var b=j(n,[o,u]),d=a===o&&c===u,O=f()(_.a.cell,b&&_.a.snake,d&&_.a.target);s.push(Object(p.jsx)("td",{className:O},o))}i.push(Object(p.jsx)("tr",{children:s},u))}return Object(p.jsx)("table",{className:_.a.field,children:Object(p.jsx)("tbody",{children:i})})}var k,w,E=n(6);!function(e){e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down"}(w||(w={}));var L=(k={},Object(E.a)(k,w.Left,[-1,0]),Object(E.a)(k,w.Up,[0,-1]),Object(E.a)(k,w.Right,[1,0]),Object(E.a)(k,w.Down,[0,1]),k),N=n(12),z=n.n(N);function C(e){var t=e.step;return Object(p.jsxs)("div",{className:z.a.navigation,children:[Object(p.jsx)("button",{onClick:function(){return t(L[w.Up])},children:"up"}),Object(p.jsx)("button",{onClick:function(){return t(L[w.Down])},children:"down"}),Object(p.jsx)("button",{onClick:function(){return t(L[w.Left])},children:"left"}),Object(p.jsx)("button",{onClick:function(){return t(L[w.Right])},children:"right"})]})}function I(e){var t=e.timer,n=e.snake,a=e.setSnake,c=e.size,i=Object(r.useState)(O(n,c)),u=Object(l.a)(i,2),o=u[0],f=u[1],b=Object(r.useState)(null),j=Object(l.a)(b,2),d=j[0],h=j[1],v=Object(r.useCallback)((function(e){var t=Object(l.a)(e,2),r=t[0],i=t[1],u=Object(l.a)(o,2),b=u[0],j=u[1],d=Object(l.a)(n[n.length-1],2),v=d[0],g=d[1],m=Object(s.a)(n),x=v+r,_=g+i,p=x===b&&_===j;m.push([x,_]),p?f(O(m,c)):m.shift(),a(m),h(e)}),[o,n]);return function(e){var t=e.navigation;Object(r.useEffect)((function(){function e(e){switch(e.keyCode){case w.Left:t(L[w.Left]);break;case w.Up:t(L[w.Up]);break;case w.Right:t(L[w.Right]);break;case w.Down:t(L[w.Down])}}return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t])}({navigation:v}),Object(r.useEffect)((function(){return function(){t.current&&clearInterval(t.current)}}),[]),Object(r.useEffect)((function(){null!==d&&(t.current&&clearInterval(t.current),t.current=window.setInterval((function(){return v(d)}),function(e,t){var n=1e3-e/t*1e3;return n<500?500:n}(n.length,c*c)))}),[d,n,v]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(S,{snake:n,size:c,target:o}),Object(p.jsx)(C,{step:v})]})}var M,R=n(13),y=n.n(R);function F(e){var t=e.result;return Object(p.jsx)("h1",{className:y.a.result,children:t?"Win":"Game over"})}!function(e){e[e.ExtraSmall=4]="ExtraSmall",e[e.Small=8]="Small",e[e.Medium=16]="Medium",e[e.Large=24]="Large",e[e.ExtraLarge=36]="ExtraLarge"}(M||(M={}));var U=n(3),A=n.n(U),D=[M.ExtraSmall,M.Small,M.Medium,M.Large,M.ExtraLarge],J=D.length*D.length;function B(e){var t=e.size,n=e.setSize,c=e.onStart,i=Object(r.useMemo)((function(){return D.findIndex((function(e){return e===t}))}),[t]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:A.a.table,style:{"--size":D.length},children:Array.from({length:J},(function(e,t){var n=Math.floor(t/D.length),r=t-n*D.length<=i&&n<=i,a=f()(A.a.cell,r&&A.a.cell_selected);return Object(p.jsx)("div",{className:a},t)}))}),Object(p.jsxs)("form",{className:A.a.container,onSubmit:c,children:[Object(p.jsx)("div",{className:A.a.size,children:D.map((function(e){var n=P(e);return Object(p.jsxs)(a.a.Fragment,{children:[Object(p.jsx)("input",{id:n,className:A.a.radio,type:"radio",name:"size",value:e,onChange:u,checked:t===e}),Object(p.jsxs)("label",{className:A.a.label,htmlFor:n,children:[P(e)," ","(".concat(e,"x").concat(e,")")]})]},n)}))}),Object(p.jsx)("button",{className:A.a.submit,children:"Start"})]})]});function u(e){n(Number(e.target.defaultValue))}}function P(e){switch(e){case M.ExtraSmall:return"xs";case M.Small:return"s";case M.Medium:return"m";case M.Large:return"l";case M.ExtraLarge:return"xl";default:return""}}var K,T=n(14),V=n.n(T);function q(){var e=Object(r.useRef)(null),t=Object(r.useState)(M.Medium),n=Object(l.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(K.Init),u=Object(l.a)(i,2),o=u[0],f=u[1],O=Object(r.useState)([]),h=Object(l.a)(O,2),v=h[0],g=h[1],m=Object(r.useMemo)((function(){if(0!==v.length){var t=Object(s.a)(v),n=b(t.pop()),r=Object(l.a)(n,2),c=r[0],i=r[1],u=v.length===a*a;return!(!u&&(d(c,a)||d(i,a)||j(t,[c,i])))&&(u?(e.current&&clearInterval(e.current),!0):void 0)}}),[v]);return Object(r.useEffect)((function(){void 0!==m&&f(K.End)}),[m]),Object(p.jsx)("div",{className:V.a.app,children:function(){switch(o){case K.Init:return Object(p.jsx)(B,{onStart:x,size:a,setSize:c});case K.Start:return Object(p.jsx)(I,{timer:e,size:a,snake:v,setSnake:g});case K.End:return Object(p.jsx)(F,{result:b(m)});default:return null}}()});function x(){var e=a/2;g([[e,e]]),f(K.Start)}}!function(e){e[e.Init=0]="Init",e[e.Start=1]="Start",e[e.End=2]="End"}(K||(K={}));n(20);i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root")),u()}],[[21,1,2]]]);
//# sourceMappingURL=main.09d98a7c.chunk.js.map